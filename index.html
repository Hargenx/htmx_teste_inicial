<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de vitimas</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">

    <!-- Drop in the HTMX lib-->
    <script src="https://unpkg.com/htmx.org@1.9.6"></script>
</head>
<body>
    <div class="container">
        <br>
        <h1>Lista de Vitimas<span>({{contagem['feito']}}/{{contagem['total']}})
        </span></h1>
        <form action="/adicionar"
            method="post"
            hx-boost="true"
        > 
            <input type="text" 
                    name="nome" 
                    placeholder="Nova vitima" 
                    value="" 
                    autocomplete="off" 
                    required
            >
            <button type="submit" 
                    value="Adicionar" 
                    class="button-primary" 
                    role="button"
                    >Adicionar</button>
        </form>
        <form action="/set_status_lista" method="post" hx-boost="true" >
            <ul>
                % for vitima in lista:
                    <li>
                        <input type="checkbox" id="vitima{{vitima['id']}}"     
                                name="vitima"                        
                                value="{{vitima['id']}}" 
                                % if vitima['feito']:
                                checked
                                % end
                        >
                        <label for="vitima{{vitima['id']}}">{{vitima['nome']}}</label>
                        <a href="/apagar/{{vitima['id']}}" hx-boost="true" >X</a>
                    </li> % end
            </ul>
            % if lista:
            <button type="submit" value="Feito" class="button-primary">Atualizar</button>
            % end
        </form>
    </div>
</body>
</html>